<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Weather</title>
	<link rel="stylesheet" href="/main.css">
	<style>
		.weather-card { max-width: 420px; margin: 1rem auto; padding: 1rem; border: 1px solid #ddd; border-radius: 6px; background: #fff; }
		.weather-row { display:flex; align-items:center; gap:1rem }
		.temp { font-size: 2rem; font-weight:600 }
	</style>
</head>
<body>
	<main class="container">
		<h1>Current Weather</h1>
		<p>Enter a city to see the current weather.</p>

		<form action="weather" method="post">
			<label for="city">City:</label>
			<input id="city" name="city" type="text" placeholder="e.g. London" required>
			<button type="submit">Get Weather</button>
		</form>

		<% if (typeof error !== 'undefined' && error) { %>
			<div class="alert alert-error" style="margin-top:10px"><strong>Error:</strong> <%= error %></div>
		<% } %>

		<% if (typeof weather !== 'undefined' && weather) { %>
			<div class="weather-card">
				<div class="weather-row">
					<div>
						<h2><%= weather.city %><% if (weather.country) { %>, <%= weather.country %><% } %></h2>
						<div class="description"><%= weather.description %></div>
					</div>
					<% if (weather.icon) { %>
						<img src="https://openweathermap.org/img/wn/<%= weather.icon %>@2x.png" alt="icon">
					<% } %>
				</div>
				<div style="margin-top:0.5rem">
					<span class="temp"><%= weather.temp %>°C</span>
					<span style="margin-left:1rem;color:#666">Feels like <%= weather.feels_like %>°C</span>
				</div>
			</div>
		<% } %>

		<p><a href="/">Back to home</a></p>
	</main>
</body>
</html>
